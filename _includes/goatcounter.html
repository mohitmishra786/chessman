<script data-goatcounter="https://{{ site.goatcounter }}.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

<script>
// GoatCounter visitor counter implementation
// Wait for count.js to load before calling visit_count
var goatCounterInterval = setInterval(function() {
    if (window.goatcounter && window.goatcounter.visit_count) {
        clearInterval(goatCounterInterval);
        
        // Find all elements with view count placeholders
        const viewElements = document.querySelectorAll('.goatcounter-views');
        
        viewElements.forEach(element => {
            const path = element.getAttribute('data-goatcounter-path') || window.location.pathname;
            
            // Create a unique container for each view counter
            const counterId = 'goatcounter-' + Math.random().toString(36).substr(2, 9);
            element.innerHTML = '<span id="' + counterId + '">Loading...</span>';
            
            // Use GoatCounter's built-in visitor counter
            window.goatcounter.visit_count({
                append: '#' + counterId,
                path: path,
                type: 'html',
                no_branding: true,
                style: 'div { border: none; background: none; color: inherit; font-size: inherit; }'
            });
        });
    }
}, 100);
</script> 