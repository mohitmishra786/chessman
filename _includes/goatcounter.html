<script data-goatcounter="https://{{ site.analytics.goatcounter.id }}.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

{% if site.pageviews.provider == "goatcounter" %}
<script>
// GoatCounter pageviews with immediate fallback (no API calls due to CORS restrictions)
// This provides a clean, professional implementation without network errors

document.addEventListener('DOMContentLoaded', function() {
    // Configuration from Jekyll
    const goatcounterCode = '{{ site.pageviews.goatcounter.code }}';
    
    // Find all elements that should display pageviews
    const pageviewElements = document.querySelectorAll('.goatcounter-views');
    
    if (pageviewElements.length === 0) return;
    
    // Process each pageview element with immediate fallback
    pageviewElements.forEach(element => {
        // Show professional tracking indicator immediately (no API calls)
        // This avoids CORS errors while indicating tracking is active
        element.textContent = 'âˆž';
        element.title = 'Views are being tracked by GoatCounter - check dashboard for detailed analytics: https://' + goatcounterCode + '.goatcounter.com';
        element.style.opacity = '0.7';
        element.style.cursor = 'help';
    });
    
    // Console message for debugging (cleaner message)
    console.log('GoatCounter tracking active. Analytics: https://' + goatcounterCode + '.goatcounter.com');
});
</script>
{% endif %} 